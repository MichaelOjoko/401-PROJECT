<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>MCM Stocks · Admin · Main Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="main.css" />

  <!-- Access Guard -->
  <script src="main.js"></script>
  <script>
    AuthAPI.requireAdmin(); // Only ASU admins allowed
  </script>

  <style>
    /* Page-specific helpers */
    .kpi-grid { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:12px; }
    .kpi { display:flex; flex-direction:column; gap:6px; }
    .kpi .label { color: rgba(0,0,0,.65); font-weight:700; }
    .kpi .value { font-size: 26px; font-weight:800; }
    .kpi .delta { font-weight:600; }
    .delta.pos { color:#1b7f32; }
    .delta.neg { color:#b91c1c; }
    .quick-grid { display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:12px; }
    .btn-ghost { background:#fff; border:1px solid var(--gray); border-radius:6px; padding:9px 12px; cursor:pointer; }
    .pill { display:inline-block; padding:4px 8px; border-radius:999px; border:1px solid var(--gray); font-weight:600; }
    .pill.pos { border-color:#1b7f32; color:#1b7f32; background:rgba(27,127,50,.08); }
    .pill.warn { border-color:#b45309; color:#b45309; background:rgba(180,83,9,.08); }
    .pill.bad { border-color:#b91c1c; color:#b91c1c; background:rgba(185,28,28,.08); }
    .tbl td:last-child, .tbl th:last-child { text-align:right; }
    @media (max-width:1024px){
      .kpi-grid { grid-template-columns:repeat(2,minmax(0,1fr)); }
      .quick-grid { grid-template-columns:1fr; }
    }
  </style>
</head>
<body class="admin">

  <!-- Admin Header Tabs -->
  <header class="admin-header">
    <div class="admin-logo">MCM Stocks Admin</div>
    <nav class="admin-nav">
      <ul>
        <li><a href="analytics.html">Analytics</a></li>
        <li><a href="admin-hub.html" class="active">Admin Hub</a></li>
        <li><a href="admin-users.html">User Management</a></li>
        <li><a href="admin-assets.html">Asset Management</a></li>
        <li><a href="admin-market.html">Market Info</a></li>
        <li><a href="reports.html">Reports</a></li>
        <li><a href="#" onclick="logoutUser()">Logout</a></li>
      </ul>
    </nav>
  </header>

  <!-- Layout -->
  <main class="dashboard">
    <!-- Sidebar -->
    <aside class="sidebar card">
      <div class="group">
        <ul>
          <li><a class="active" href="admin-hub.html">Admin Hub</a></li>
          <li><a href="admin-users.html">User Management</a></li>
          <li><a href="admin-assets.html">Asset Management</a></li>
        </ul>
      </div>
      <div class="group">
        <div class="group-title">Management</div>
        <ul>
          <li><a href="admin-market.html">Market Info</a></li>
          <li><a href="admin-notifications.html">Notifications</a></li>
        </ul>
      </div>
      <div class="group">
        <div class="group-title">Reports</div>
        <ul>
          <li><a href="reports.html">Trading Reports</a></li>
          <li><a href="admin-audit.html">Audit Logs</a></li>
        </ul>
      </div>
    </aside>

    <!-- Main Content -->
    <section class="content">
      <!-- Header Card -->
      <div class="card" style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
        <div style="display:flex;align-items:center;gap:12px;">
          <h2 style="margin:0;">Admin Main Hub</h2>
        </div>
        <div style="display:flex;gap:8px;">
          <a class="button positive" href="admin-users.html">+ Add User</a>
          <button class="btn-ghost">Export</button>
        </div>
      </div>

      <!-- KPI Row -->
      <div class="kpi-grid" style="margin-top:12px;">
        <div class="card kpi">
          <div class="label">Total Users</div>
          <div class="value">1,248</div>
          <div class="delta pos">+32 today</div>
        </div>
        <div class="card kpi">
          <div class="label">Orders (24h)</div>
          <div class="value">392</div>
          <div class="delta pos">+4.1%</div>
        </div>
        <div class="card kpi">
          <div class="label">Fill Rate</div>
          <div class="value">99.2%</div>
          <div class="delta">steady</div>
        </div>
        <div class="card kpi">
          <div class="label">System Health</div>
          <div class="value">OK</div>
          <div><span class="pill pos">All services up</span></div>
        </div>
      </div>

      <!-- Quick Links -->
      <div class="quick-grid" style="margin-top:12px;">
        <div class="card">
          <h3 style="margin-top:0;">User Operations</h3>
          <p class="muted">Common admin tasks</p>
          <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <a href="admin-users.html" class="button positive">Invite User</a>
            <a href="admin-users.html" class="btn-ghost">Manage Roles</a>
            <a href="admin-audit.html" class="btn-ghost">View Audit Log</a>
          </div>
        </div>
        <div class="card">
          <p class="muted">Safeguards & switches</p>
          <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <a href="admin-controls.html" class="btn-ghost">Toggle Market</a>
            <a href="admin-controls.html" class="btn-ghost">Risk Limits</a>
            <a href="admin-controls.html" class="btn-ghost">Symbols Access</a>
          </div>
        </div>
        <div class="card">
          <h3 style="margin-top:0;">Reports</h3>
          <p class="muted">Snapshots & exports</p>
          <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <a href="reports.html" class="btn-ghost">Daily Summary</a>
            <a href="reports.html" class="btn-ghost">PnL by User</a>
            <a href="reports.html" class="btn-ghost">Compliance</a>
          </div>
        </div>
      </div>

      <!-- Recent Activity / System Status -->
      <div style="display:grid;grid-template-columns:2fr 1fr;gap:12px;margin-top:12px;">
        <div class="card">
          <h3 style="margin-top:0;">Recent Activity</h3>
          <table class="tbl" style="margin:0;">
            <thead><tr><th>Time</th><th>Event</th><th>User</th><th>Details</th></tr></thead>
            <tbody>
              <tr><td>14:32</td><td>Order Filled</td><td>jane@…</td><td><span class="pill pos">AAPL @ 101.42</span></td></tr>
              <tr><td>14:21</td><td>User Suspended</td><td>user4@…</td><td><span class="pill warn">Fraud check</span></td></tr>
              <tr><td>13:59</td><td>Role Changed</td><td>analyst2@…</td><td><span class="pill">Analyst → Trader</span></td></tr>
              <tr><td>13:40</td><td>New User</td><td>new@…</td><td><span class="pill">Invite sent</span></td></tr>
            </tbody>
          </table>
        </div>

        <div class="card">
          <h3 style="margin-top:0;">System Status</h3>
          <table class="tbl" style="margin:0;">
            <thead><tr><th>Service</th><th>Status</th></tr></thead>
            <tbody>
              <tr><td>API Gateway</td><td><span class="pill pos">Up</span></td></tr>
              <tr><td>Quotes</td><td><span class="pill pos">Up</span></td></tr>
              <tr><td>Orders</td><td><span class="pill pos">Up</span></td></tr>
              <tr><td>Portfolio</td><td><span class="pill pos">Up</span></td></tr>
              <tr><td>DB</td><td><span class="pill pos">Up</span></td></tr>
            </tbody>
          </table>
          <div class="muted" style="margin-top:8px;">Last check: 14:35</div>
        </div>
      </div>

      <!-- Recent Users -->
      <div class="card" style="margin-top:12px;">
        <h3 style="margin-top:0;">Recent Users</h3>
        <table class="tbl" style="margin:0;">
          <thead><tr><th>Username</th><th>Email</th><th>Role</th><th>Joined</th><th></th></tr></thead>
          <tbody>
            <tr><td>username_1</td><td>user@email.com</td><td><span class="pill">Admin</span></td><td>Jan 9</td><td><a class="btn-ghost" href="admin-users.html">Manage</a></td></tr>
            <tr><td>username_2</td><td>user@email.com</td><td><span class="pill">Trader</span></td><td>Jan 9</td><td><a class="btn-ghost" href="admin-users.html">Manage</a></td></tr>
            <tr><td>username_3</td><td>user@email.com</td><td><span class="pill">Analyst</span></td><td>Jan 9</td><td><a class="btn-ghost" href="admin-users.html">Manage</a></td></tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <footer>© MCM Stocks</footer>
</body>
</html>
