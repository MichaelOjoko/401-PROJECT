<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MCM Stocks — Settings</title>

  <!-- Fonts / Icons -->
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet" />
  <link rel="stylesheet" href="./main.css" />
  <script src="./main.js"></script>

  <style>
    /* Full-page layout fix */
    main.dashboard {
      display: flex;
      align-items: flex-start;
      gap: 0;
      padding: 0;
      background: var(--gray);
      min-height: calc(100vh - 64px);
    }

    .sidebar {
      width: 240px;
      min-height: calc(100vh - 64px);
      background: #f8f8f8;
      border-right: 1px solid var(--gray);
      position: sticky;
      top: 64px;
      padding: 16px 12px;
    }

    section {
      flex: 1;
      background: #f3f3f3;
      padding: 24px 40px;
    }

    .settings-grid {
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 24px;
      width: 100%;
      align-items: start;
    }

    @media (max-width: 960px) {
      .settings-grid { grid-template-columns: 1fr; }
      section { padding: 16px; }
    }

    .settings-grid .card {
      background: var(--white);
      border-radius: 10px;
      border: 1px solid var(--gray);
      box-shadow: 0 1px 3px rgba(0,0,0,.05);
      padding: 20px;
    }

    .list { list-style: none; margin: 0; padding: 0; }
    .list li a { display:block; padding:6px 0; color:var(--black); text-decoration:none; }
    .list li a:hover { color: var(--gold); }

    .row { display:flex; align-items:center; justify-content:space-between; gap:12px; }
    .muted-sm { font-size:12px; color:#666; }

    /* Toggle switch */
    .switch { position:relative; width:44px; height:24px; display:inline-block; }
    .switch input { display:none; }
    .slider {
      position:absolute; cursor:pointer; top:0; left:0; right:0; bottom:0;
      background:#aaa; transition:.2s; border-radius:999px;
    }
    .slider:before {
      content:""; position:absolute; height:18px; width:18px; left:3px; top:3px;
      background:#fff; border-radius:50%; transition:.2s;
    }
    input:checked + .slider { background: var(--gold); }
    input:checked + .slider:before { transform: translateX(20px); }

    .button.danger { border:1px solid #b91c1c; color:#b91c1c; background:transparent; }
    .button.danger:hover { background:#b91c1c; color:#fff; }

    dialog { border:none; border-radius:12px; padding:0; max-width:420px; width:100%; }
    dialog::backdrop { background:rgba(0,0,0,.5); }
    .modal { padding:16px; }
  </style>
</head>

<body>
  <!-- Header -->
  <header>
    <div style="font-weight:700">MCM Stocks</div>
    <nav>
      <ul>
        <li><a href="index.html" data-top="index.html">Home</a></li>
        <li><a href="cash.html" data-top="cash.html">Wallet</a></li>
        <li id="nav-market"><a href="market.html" data-top="market.html">Market</a></li>
        <li id="nav-login"><a href="login.html" data-top="login.html">Login</a></li>
        <li id="nav-register"><a href="register.html" data-top="register.html">Register</a></li>
        <li id="nav-logout" style="display:none;"><a href="#" onclick="logoutUser()">Logout</a></li>
      </ul>
    </nav>
  </header>

  <main class="dashboard">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="group">
        <div class="group-title">Main</div>
        <ul>
          <li><a href="dashboard.html">Overview</a></li>
          <li><a href="portfolio.html">Portfolio</a></li>
          <li><a href="market.html">Trading</a></li>
          <li><a href="cash.html">Wallet</a></li>
        </ul>
      </div>
      <div class="group">
        <div class="group-title">Activity</div>
        <ul>
          <li><a href="tradehistory.html">Trade History</a></li>
          <li><a href="profile.html">Profile</a></li>
          <li><a href="settings.html" class="active">Settings</a></li>
        </ul>
      </div>
      <div class="group">
        <div class="group-title">Quick</div>
        <ul>
          <li><a href="market.html?sell=1">Sell Stock</a></li>
          <li><a href="portfolio.html">View Portfolio</a></li>
          <li><a href="research.html">Market Research</a></li>
        </ul>
      </div>
    </aside>

    <!-- Main Section -->
    <section>
      <div class="card">
        <h1 style="margin-top:0;">Settings</h1>
        <p class="muted">Manage preferences, notifications, appearance, and account security.</p>
      </div>

      <div class="settings-grid">
        <!-- Left -->
        <div class="card">
          <h3 style="margin-top:0;">Categories</h3>
          <ul class="list">
            <li><a href="#profile">Profile & Preferences</a></li>
            <li><a href="#notify">Notifications</a></li>
            <li><a href="#appearance">Appearance</a></li>
            <li><a href="#security">Security</a></li>
            <li><a href="#privacy">Privacy & Data</a></li>
            <li><a href="#danger">Danger Zone</a></li>
          </ul>
          <p class="muted-sm" style="margin-top:8px;">Settings are saved locally and can sync later.</p>
        </div>

        <!-- Right Panels -->
        <div class="stack">
          <!-- Profile -->
          <div id="profile" class="card">
            <h2 style="margin-top:0;">Profile & Preferences</h2>
            <label>Display name</label>
            <input id="s_name" type="text" placeholder="Your name" />
            <label style="margin-top:8px;">Time zone</label>
            <select id="s_tz">
              <option value="auto">Auto-detect</option>
              <option value="America/New_York">America/New_York</option>
              <option value="UTC">UTC</option>
            </select>
            <label style="margin-top:8px;">Bio</label>
            <textarea id="s_bio" rows="3" placeholder="Short bio..."></textarea>
            <div class="row" style="margin-top:10px;">
              <button class="button" id="btn_profile_reset">Reset</button>
              <button class="button positive" id="btn_profile_save">Save</button>
            </div>
          </div>

          <!-- Notifications -->
          <div id="notify" class="card">
            <h2 style="margin-top:0;">Notifications</h2>
            <div class="row">
              <div><div>Price alerts</div><div class="muted-sm">Notify when stock crosses threshold</div></div>
              <label class="switch"><input id="n_price" type="checkbox"><span class="slider"></span></label>
            </div>
            <div class="row" style="margin-top:8px;">
              <div><div>Order updates</div><div class="muted-sm">Executions and cancels</div></div>
              <label class="switch"><input id="n_orders" type="checkbox"><span class="slider"></span></label>
            </div>
            <div class="row" style="margin-top:8px;">
              <div><div>News digests</div><div class="muted-sm">Market summaries</div></div>
              <label class="switch"><input id="n_news" type="checkbox"><span class="slider"></span></label>
            </div>
            <div class="row" style="margin-top:10px; justify-content:flex-end;">
              <button class="button" id="btn_notify_test">Test</button>
              <button class="button positive" id="btn_notify_save">Save</button>
            </div>
          </div>

          <!-- Appearance -->
          <div id="appearance" class="card">
            <h2 style="margin-top:0;">Appearance</h2>
            <label>Theme</label>
            <select id="a_theme">
              <option value="system">System</option>
              <option value="light">Light</option>
              <option value="dark">Dark</option>
            </select>
            <label style="margin-top:8px;">Currency</label>
            <select id="a_ccy">
              <option value="USD">USD</option>
              <option value="EUR">EUR</option>
              <option value="JOD">JOD</option>
            </select>
            <div class="row" style="margin-top:10px; justify-content:flex-end;">
              <button class="button positive" id="btn_appearance_save">Save</button>
            </div>
          </div>

          <!-- Danger -->
          <div id="danger" class="card">
            <h2 style="margin-top:0; color:#b91c1c;">Danger Zone</h2>
            <p class="muted">Proceed carefully—there’s no undo here.</p>
            <button class="button danger" id="btn_reset_all">Reset ALL settings</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="content"><p class="muted">© 2025 MCM Stocks</p></footer>

  <!-- Auth UI toggle -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const loggedIn = !!(window.AuthAPI && AuthAPI.isAuthenticated && AuthAPI.isAuthenticated());
      const logoutItem = document.getElementById("nav-logout");
      const loginItem  = document.getElementById("nav-login");
      const regItem    = document.getElementById("nav-register");

      if (loggedIn) {
        if (logoutItem) logoutItem.style.display = "inline-block";
        if (loginItem)  loginItem.style.display  = "none";
        if (regItem)    regItem.style.display    = "none";
      } else {
        if (logoutItem) logoutItem.style.display = "none";
        if (loginItem)  loginItem.style.display  = "inline-block";
        if (regItem)    regItem.style.display    = "inline-block";
      }
    });
  </script>
</body>
</html>